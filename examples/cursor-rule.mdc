---
description: LOCAL code review using external Claude reviewer agent - NOT GitHub
alwaysApply: true
globs:
  - "**/*.swift"
---

# Local Reviewer Agent (Your Coding Partner)

You have access to an external Claude reviewer agent. Use it as a collaborative partner throughout your work.

## Trigger Phrases

**For questions/validation (mid-task):**
- "check with the local reviewer"
- "ask the reviewer"
- "validate with reviewer"
- "check with reviewer"

→ Run: `./scripts/review.sh "YOUR_QUESTION_HERE"`

**For full review (pre-commit):**
- "run local review"
- "local review"
- "smart review"
- "full review"

→ Run: `./scripts/review.sh`

**For team review (multi-perspective):**
- "team review"
- "multi-perspective review"
- "review from different angles"
- "check with the team"

→ Run: `./scripts/review.sh --team "OPTIONAL_CONTEXT"`

## Two Ways To Use The Reviewer

### 1. Mid-Task: Validation & Questions

When you're uncertain about an approach, need validation, or have questions about changes you just made:

```bash
./scripts/review.sh "Is my approach to fixing this retain cycle correct? I used weak self in the closure."
```

```bash
./scripts/review.sh "I added caching here - does this follow the project's ImageCacheManager pattern?"
```

```bash
./scripts/review.sh "Should I use @StateObject or @ObservedObject for this view model?"
```

The reviewer sees your uncommitted changes + your question, and gives targeted guidance.

### 2. Pre-Commit: Full Review

Before committing, run a full review with no question:

```bash
./scripts/review.sh
```

This does a comprehensive PR-aware review and returns **READY TO COMMIT** or **NEEDS WORK**.

## Workflow Example

```
User: "Fix the three medium issues from the PR review"

You (Cursor):
1. Read the issues, start fixing the first one
2. Make changes, but unsure about threading → run: ./scripts/review.sh "Is using MainActor here the right fix for the threading issue?"
3. Get confirmation, continue to second issue
4. Fix it, move to third issue
5. All done → run: ./scripts/review.sh (full review)
6. If READY TO COMMIT → offer to commit
7. If NEEDS WORK → address issues, re-run review
```

## CRITICAL Rules

- **DO NOT** post comments to GitHub or use `gh pr comment`
- **DO NOT** request reviews from GitHub bots
- **ALWAYS** use the local `./scripts/review.sh` script
- **ALWAYS** run full review before committing

## What The Reviewer Sees

The reviewer agent receives:
- Your uncommitted git diff (all changes)
- PR description, comments, and CI status from GitHub
- Your question or context (if provided)

It's a knowledgeable partner who understands the full picture.
